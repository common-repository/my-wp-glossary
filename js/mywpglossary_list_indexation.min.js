!function(s){"use strict";s(window).load(function(){async function e(e,t,o,n=null){s("#index_notice").remove();var p=s('<div id="index_notice" class="notice inline"></div>'),r=s("<p>"+t+"</p>"),a=s("<span></span>");if(p.addClass("notice-"+e),o&&p.addClass("is-dismissible"),n){n.posts_percent<100&&a.append('<div class= "spinner is-active" ></div>');var i=n.posts_percent.toFixed(2).replace(/\.?0*$/,"");a.append("<p>"+i+"% completed "+n.posts_processed+" on "+n.total_posts+"</p>")}p.append([a,r]),s("#wpbody-content").prepend(p)}s(document).ready(function(){s("#mywpglossary-index").click(function(t){t.preventDefault(),async function t(o=1,n=null){null===n&&(n={total_posts:0,posts_processed:0,terms_processed:0,posts_percent:0}),s("#mywpglossary-index").prop("disabled",!0),jQuery.ajax({url:mywpglossary_admin.rest_url+"mywpglossary/v1/index/?p="+o,method:"GET",async:!0,beforeSend:function(s){s.setRequestHeader("X-WP-Nonce",mywpglossary_admin.nonce)},success:function(o){"success"===o.status?(n.total_posts=Number(o.stats.total_posts),n.posts_processed+=Number(o.stats.posts_processed),n.terms_processed+=Number(o.stats.terms_processed),n.posts_percent=100*n.posts_processed/Number(n.total_posts),""===o.pagination.next?(e("success","You did it!",!0),s("#mywpglossary-index").prop("disabled",!1)):(e("info","Wait a little bit more please.",!1,n),t(o.pagination.current+1,n))):(e(o.status,o.message,!0),s("#mywpglossary-index").prop("disabled",!0))},error:function(t){e("error","unknown error",!0),s("#mywpglossary-index").prop("disabled",!0)}})}(1)})})})}(jQuery);